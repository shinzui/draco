// Generated by BUCKLESCRIPT VERSION 3.1.5, PLEASE EDIT WITH CARE
'use strict';

var Caml_array = require("bs-platform/lib/js/caml_array.js");
var BsAsyncMonad = require("bs-async-monad/src/bsAsyncMonad.js");
var Fs$LidcoreBsNode = require("@lidcore/bs-node/src/fs.js");
var Utils$LidcoreDraco = require("../lib/utils.js");
var Instances$LidcoreDraco = require("../lib/instances.js");

var usage = "Usage: deploy /path/to/config.json";

var configPath;

try {
  configPath = Caml_array.caml_array_get(process.argv, 2);
}
catch (exn){
  console.log(usage);
  configPath = process.exit(1);
}

var config = Utils$LidcoreDraco.Json[/* parse_buf */1](Fs$LidcoreBsNode.readFileSync(configPath));

var name = config.name;

console.log("Deploying " + (String(name) + "..."));

BsAsyncMonad.Callback[/* finish */26](/* None */0, BsAsyncMonad.Callback[/* >| */9](Instances$LidcoreDraco.Config[/* initialize */0](/* None */0, config), (function () {
            console.log("Done!");
            return /* () */0;
          })));

exports.usage = usage;
/* configPath Not a pure module */
